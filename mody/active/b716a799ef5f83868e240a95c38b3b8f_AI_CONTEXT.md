˜# AI Agent Context

> **Start here**: Read `@AI_QUICK_START.md` first (55 lines, fits in context)
> This file is the detailed reference. AI_QUICK_START.md is the summary.

---

## ğŸš¨ Critical Rules

1. **File Size**: Routes <100, Components <120, Hard max 150
2. **Multi-Tenant**: ALL queries MUST include `store_id`
3. **Build Check**: Run `npm run build` after ANY code change
4. **Size Check**: Run `npm run lint:file-size` before commits
5. **No Loops**: Never query database inside loops (use joins)
6. **Update CURRENT_WORK.md**: Before ending any session
7. **Builder UX**: Scroll inside canvas, use `isMobilePreview`

---

## ğŸ“‹ Task-Based Reading

| Task | Read First |
|------|------------|
| API / Backend | `docs/AI_RULES_BACKEND.md` |
| Frontend | `docs/AI_RULES_FRONTEND.md` |
| React Hooks | `docs/AI_RULES_REACT.md` |
| Database | `docs/AI_RULES_DATABASE.md` |
| Visual Builder | `src/app/newlayout1/MOCKUP_CONTEXT.md` |

---

## ğŸ—ï¸ Architecture

```
Route (HTTP)  â†’  Service (Logic)  â†’  Database
 < 100 lines      < 120 lines        Supabase
```

---

## ğŸ“ Key Files

| Need | Location |
|------|----------|
| Services | `src/lib/services/` |
| API helpers | `src/lib/api/response.ts` |
| Auth | `src/lib/auth/` |
| Hooks | `src/hooks/` |

---

## ğŸ—„ï¸ Existing Infrastructure (Don't Recreate)

| Table | API | Hooks |
|-------|-----|-------|
| stores | `/api/stores` | `useStores` |
| products | `/api/products` | `useProducts`, `useCreateProduct`, `useUpdateProduct`, `useDeleteProduct` |
| categories | `/api/categories` | `useCategories`, `useAllCategories` |
| orders | `/api/orders` | `useOrders`, `useUpdateOrderStatus` |
| customers | `/api/customers` | `useCustomers` |
| discounts | `/api/discounts` | - |
| funnels | `/api/funnels` | `useFunnels` |
| media | `/api/media` | `useMedia` |

---

## ğŸ”€ Essential Workflows

| Workflow | When |
|----------|------|
| `/egybag` | Start here - master entry |
| `/add-api` | New API endpoint |
| `/complete-task` | Before marking done |
| `/pre-commit-check` | Before git commit |

---

## âœ… Before Commit Checklist

- [ ] `npm run build` passes
- [ ] `npm run lint:file-size` passes
- [ ] All queries include `store_id`
- [ ] Files under 120 lines

---

## ğŸ“– Full Documentation

For complete details, see:
- `docs/golden_rules.md` - All 16 rules
- `docs/ARCHITECTURE_INVENTORY.md` - Full inventory
- `docs/BACKEND_SECURITY_ARCHITECTURE.md` - Security details
 *cascade08*cascade08 *cascade08  *cascade08 !*cascade08!" *cascade08"%%& *cascade08&+ *cascade08+,*cascade08,0 *cascade0803*cascade0834 *cascade0847*cascade0878 *cascade088:*cascade08:> *cascade08>?*cascade08?E *cascade08EF FI*cascade08IJ JN*cascade08NO OP*cascade08PR RU*cascade08UV VX*cascade08X\ \]*cascade08]^ ^_*cascade08_` `a*cascade08ab *cascade08bc*cascade08ce *cascade08eh*cascade08hi *cascade08il*cascade08ln *cascade08nq*cascade08qr *cascade08rt*cascade08tu *cascade08uw*cascade08wy *cascade08y{*cascade08{| *cascade08|*cascade08 *cascade08‚*cascade08‚… *cascade08…ˆ*cascade08ˆŒ *cascade08Œ*cascade08 *cascade08‘*cascade08‘• *cascade08•–*cascade08–› *cascade08›œ*cascade08œŸ *cascade08Ÿ *cascade08 ¤ *cascade08¤§*cascade08§© *cascade08©ª*cascade08ª¬ *cascade08¬¸ *cascade08¸º *cascade08ºÁ*cascade08ÁÃ *cascade08ÃÅ*cascade08ÅÆ *cascade08ÆÇ*cascade08ÇÉ *cascade08ÉËËÌ *cascade08ÌÎÎ× *cascade08×ÚÚÛ *cascade08ÛŞŞß *cascade08ßááâ *cascade08âççè *cascade08èò *cascade08
òõ õö*cascade08
öù ùú *cascade08úıış *cascade08şÿÿ‚ *cascade08‚„*cascade08„… *cascade08…† *cascade08†ˆˆ‰ *cascade08‰‹ *cascade08‹ŒŒ *cascade08 *cascade08’’“ *cascade08“——š *cascade08š› *cascade08›*cascade08Ÿ *cascade08Ÿ¡¡£ *cascade08£¦*cascade08¦¨ *cascade08¨««® *cascade08®²²´ *cascade08´µµ¶ *cascade08¶· *cascade08·¸¸º *cascade08º¾¾¿ *cascade08¿ÀÀÄ *cascade08ÄÈÈÊ *cascade08ÊÌÌÎ *cascade08ÎÏÏÑ *cascade08ÑÒÒÓ *cascade08ÓÖÖ× *cascade08×ØØÙ *cascade08ÙÛÛÜ *cascade08ÜŞŞá *cascade08áææè *cascade08èééë *cascade08ëììï *cascade08ïğğó *cascade08óôô‚ *cascade08‚„ *cascade08„……‡ *cascade08‡ˆˆ‰ *cascade08‰ *cascade08““– *cascade08–——˜ *cascade08˜™ *cascade08™œœ *cascade08¡ *cascade08¡¤¤¦ *cascade08¦§ *cascade08§ªª¬ *cascade08¬­ *cascade08­±±² *cascade08²³ *cascade08³´ *cascade08´¶ *cascade08¶··¸ *cascade08¸¹¹» *cascade08»¾¾¿ *cascade08¿ÃÃÅ *cascade08ÅÆ *cascade08ÆÇ *cascade08ÇÉ *cascade08ÉÌÌÍ *cascade08ÍÎÎÏ *cascade08ÏĞĞÑ *cascade08ÑÒ *cascade08ÒÓ *cascade08ÓÔÔ× *cascade08×ØØÙ *cascade08ÙÜ *cascade08Üİ *cascade08İŞŞß *cascade08ßááä *cascade08äå *cascade08åççè *cascade08èé *cascade08éëëí *cascade08íï *cascade08ïğğó *cascade08óô *cascade08ôõõû *cascade08ûüüş *cascade08ş‚ *cascade08‚……‡ *cascade08‡ˆˆ‰ *cascade08‰ *cascade08––š *cascade08šœœ *cascade08ŸŸª *cascade08ª««® *cascade08®°°³ *cascade08³´ *cascade08
´ü ü€*cascade08
€ ‚*cascade08
‚– –— *cascade08—œ *cascade08œŸŸ  *cascade08 ¢¢£ *cascade08£§§¶ *cascade08¶¿¿Ç *cascade08ÇÍÍÓ *cascade08
ÓÜ Üİ *cascade08İëëí *cascade08íò *cascade08òùùú *cascade08úı *cascade08
ı€ €‚ *cascade08‚ *cascade08––˜ *cascade08˜ *cascade08  *cascade08 ¡¡£ *cascade08£¤¤¦ *cascade08¦§§© *cascade08©« *cascade08
«µ µ¶ *cascade08¶¸¸¹ *cascade08¹ºº½ *cascade08½ÂÂÃ *cascade08ÃÈ *cascade08ÈÉÉÊ *cascade08ÊÌÌÎ *cascade08ÎÏÏÑ *cascade08ÑÒÒÓ *cascade08
ÓÕ ÕÖ *cascade08Ö××Ø *cascade08ØÜÜİ *cascade08İääé *cascade08éêêë *cascade08ëììî *cascade08
î÷ ÷ú *cascade08úüüı *cascade08ışşÿ *cascade08
ÿ ‚ *cascade08‚ƒƒ„ *cascade08
„  *cascade08‘‘’ *cascade08’••– *cascade08–™™š *cascade08šœœ *cascade08ŸŸ¢ *cascade08¢££¤ *cascade08¤¥¥¦ *cascade08¦§§¨ *cascade08
¨¬ ¬® *cascade08®¯¯± *cascade08±µµ¶ *cascade08¶½½¾ *cascade08¾¿¿Á *cascade08ÁÂÂÃ *cascade08ÃÅÅÇ *cascade08ÇÉÉÊ *cascade08ÊÏÏÒ *cascade08ÒÓÓÖ *cascade08ÖÜÜŞ *cascade08Şááã *cascade08ãääì *cascade08ìññó *cascade08ó÷÷ù *cascade08ùûûü *cascade08ü€€ƒ *cascade08ƒ„„… *cascade08…ˆˆ‰ *cascade08‰‹‹ *cascade08” *cascade08”••– *cascade08
–— —˜ *cascade08
˜™ ™š *cascade08š››œ *cascade08œ *cascade08
Ÿ Ÿ  *cascade08 ¡ *cascade08¡¢ *cascade08¢£ *cascade08£¤ *cascade08¤¥ *cascade08¥¦ *cascade08¦§ *cascade08
§¨ ¨©*cascade08
©ª ª« *cascade08
«¬ ¬­ *cascade08­® *cascade08®¯ *cascade08¯° *cascade08
°² ²³ *cascade08³µ *cascade08µ÷ *cascade08÷ùùú *cascade08úûûü *cascade08üÿÿ‹	 *cascade08‹	Œ	Œ		 *cascade08	’	’	“	 *cascade08
“	”	 ”	”	*cascade08”	š	 *cascade08š	 	 	¡	 *cascade08¡	¥	¥	µ	 *cascade08µ	·	·	¸	 *cascade08¸	»	»	¼	 *cascade08¼	½	½	Æ	 *cascade08
Æ	Ë	 Ë	Ö	 *cascade08Ö	Ú	Ú	Û	 *cascade08Û	á	 *cascade08á	ä	*cascade08ä	å	å	æ	 *cascade08æ	ë	 *cascade08
ë	î	 î	ğ	*cascade08
ğ	ñ	 ñ	ò	*cascade08
ò	ô	 ô	õ	*cascade08
õ	Š
 Š

*cascade08

“
 “
–
*cascade08
–
™
 ™
œ
*cascade08
œ

 
Ÿ
*cascade08
Ÿ
¢
 ¢
¤
*cascade08
¤
¥
 ¥
§
*cascade08
§
¨
 ¨
­
*cascade08
­
®
 ®
¯
*cascade08
¯
±
 ±
²
*cascade08
²
µ µ¶*cascade08
¶· ·¸*cascade08
¸º º»*cascade08
»¼ ¼½*cascade08
½Ç ÇÈ*cascade08
ÈÉ ÉÊ*cascade08
Ê« «­*cascade08
­³ ³·*cascade08
·¸ ¸¹*cascade08
¹„ „ˆ*cascade08
ˆ‰ ‰*cascade08
 ‘*cascade08
‘¤ ¤¦*cascade08
¦§ §¨*cascade08
¨© ©ª*cascade08
ª® ®¯*cascade08
¯° °±*cascade08
±² ²µ*cascade08
µ· ·½*cascade08
½™ ™² *cascade08²¼*cascade08¼Ò *cascade08Òøø¸ *cascade08
¸¹ ¹»»Á *cascade08ÁÂ*cascade08ÂÄ *cascade08ÄÊ*cascade08ÊË *cascade08ËÏ*cascade08ÏĞ *cascade08ĞÔ*cascade08ÔÕ *cascade08ÕÚ*cascade08ÚÛ *cascade08ÛÜ *cascade08Üİ*cascade08
İà àá *cascade08
áã ãç*cascade08
çè èì*cascade08
ìí íî*cascade08
îğ ğò*cascade08
òó ó÷*cascade08÷ø *cascade08øù*cascade08ùú *cascade08úü*cascade08
üı ı€*cascade08
€ „*cascade08
„… …‰*cascade08
‰Š Š‹*cascade08
‹ *cascade08 *cascade08—*cascade08
—˜ ˜¥*cascade08¥¦ *cascade08¦¨*cascade08¨© *cascade08©««¬ *cascade08
¬° °³*cascade08
³´ ´»*cascade08
»¼ ¼Ã*cascade08
ÃÄ Äç*cascade08
çè èë*cascade08
ëì ìó*cascade08
óô ôõ*cascade08
õö öú*cascade08
úı ı€*cascade08
€„ „—*cascade08—˜ *cascade08"(12a9a5be88f595131dc08b1ed23b1a4677f7dbc72file:///Users/homework/Documents/Egybag-Gemini%20Version%202026/Egybag-gemini%202026/Egybag-Gemini%202026%20Version/AI_CONTEXT.md:sfile:///Users/homework/Documents/Egybag-Gemini%20Version%202026/Egybag-gemini%202026/Egybag-Gemini%202026%20Version